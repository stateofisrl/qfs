# ğŸš€ Render Deployment Guide - Tesla Investment Platform

## Overview
Deploy your Tesla Investment Platform to Render's **$7/month Standard Plan** with PostgreSQL database.

---

## ğŸ“‹ Prerequisites

1. **GitHub Account** - Your code must be in a GitHub repository
2. **Render Account** - Sign up at https://render.com
3. **$7/month Standard Plan** - Provides:
   - 512 MB RAM
   - PostgreSQL database included
   - Automatic SSL/HTTPS
   - Auto-deploy from Git
   - Custom domain support

---

## ğŸ”§ Step 1: Prepare Your Repository

### Files Already Created for Render:
- âœ… `render.yaml` - Render configuration
- âœ… `build.sh` - Build script
- âœ… `requirements.txt` - Updated with `dj-database-url`
- âœ… `config/settings.py` - Updated to use `DATABASE_URL`

### Push to GitHub:
```bash
# Initialize git if not already done
git init
git add .
git commit -m "Ready for Render deployment"

# Push to GitHub
git remote add origin https://github.com/yourusername/your-repo.git
git branch -M main
git push -u origin main
```

---

## ğŸŒ Step 2: Deploy on Render

### Option A: Using render.yaml (Recommended)

1. **Go to Render Dashboard**: https://dashboard.render.com

2. **Click "New +"** â†’ **"Blueprint"**

3. **Connect Repository**: 
   - Connect your GitHub account
   - Select your repository
   - Render will detect `render.yaml` automatically

4. **Configure Blueprint**:
   - **Service Name**: tesla-investment-platform (or your choice)
   - **Region**: Oregon (or closest to your users)
   - **Plan**: Select **Standard ($7/month)**

5. **Set Environment Variables**:
   Render will auto-configure most from `render.yaml`, but verify:
   ```
   SECRET_KEY=<auto-generated>
   DEBUG=False
   ALLOWED_HOSTS=<will be auto-set to your-app.onrender.com>
   DATABASE_URL=<auto-configured from PostgreSQL>
   ```

6. **Click "Apply"** - Render will:
   - Create PostgreSQL database ($7/month)
   - Create web service ($7/month)
   - Run build.sh
   - Deploy your application

### Option B: Manual Setup

1. **Create PostgreSQL Database**:
   - Click "New +" â†’ "PostgreSQL"
   - Name: `tesla-investment-db`
   - Plan: **Standard ($7/month)**
   - Click "Create Database"
   - Copy the **Internal Database URL**

2. **Create Web Service**:
   - Click "New +" â†’ "Web Service"
   - Connect your GitHub repository
   - Configure:
     - **Name**: tesla-investment-platform
     - **Region**: Oregon
     - **Branch**: main
     - **Runtime**: Python 3
     - **Build Command**: `./build.sh`
     - **Start Command**: `gunicorn config.wsgi:application`
     - **Plan**: Standard ($7/month)

3. **Add Environment Variables**:
   In the web service dashboard, add:
   ```
   SECRET_KEY=<generate-strong-key>
   DEBUG=False
   ALLOWED_HOSTS=your-app-name.onrender.com
   DATABASE_URL=<paste-internal-database-url>
   CSRF_COOKIE_SECURE=True
   SESSION_COOKIE_SECURE=True
   SECURE_SSL_REDIRECT=True
   SECURE_HSTS_SECONDS=31536000
   SECURE_HSTS_INCLUDE_SUBDOMAINS=True
   SECURE_HSTS_PRELOAD=True
   ```

4. **Deploy**: Click "Create Web Service"

---

## ğŸ” Step 3: Generate SECRET_KEY

Generate a strong secret key:
```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

Add this to Render environment variables.

---

## ğŸ‘¤ Step 4: Create Superuser

After deployment completes:

1. **Go to your web service dashboard**
2. **Click "Shell"** (opens terminal)
3. **Run**:
   ```bash
   python manage.py createsuperuser
   ```
4. **Enter details**:
   - Email
   - Username
   - Password

---

## ğŸ¨ Step 5: Initial Setup

### Access your site:
- **Frontend**: https://your-app-name.onrender.com
- **Admin**: https://your-app-name.onrender.com/admin/

### Configure in Django Admin:

1. **Login to admin** with superuser credentials

2. **Create Investment Plans**:
   - Go to Investments â†’ Investment Plans
   - Add plans (e.g., "Basic Plan - 10% ROI")

3. **Add Crypto Wallets**:
   - Go to Deposits â†’ Crypto Wallets
   - Add wallet addresses for deposits

4. **Create test user** (optional):
   - Go to Users â†’ Custom Users
   - Add user for testing

---

## ğŸ“Š Step 6: Verify Deployment

### Check these endpoints:
```bash
# Homepage
curl https://your-app-name.onrender.com/

# API health check
curl https://your-app-name.onrender.com/api/

# Admin login
curl https://your-app-name.onrender.com/admin/
```

### Check logs:
- In Render dashboard â†’ Your service â†’ "Logs" tab
- Should see: "Starting gunicorn"

---

## ğŸ”„ Step 7: Enable Auto-Deploy

Render automatically deploys when you push to your main branch:

```bash
# Make changes locally
git add .
git commit -m "Update feature"
git push origin main

# Render will automatically:
# 1. Pull latest code
# 2. Run build.sh
# 3. Restart service
```

---

## ğŸ’° Render Costs Breakdown

| Resource | Plan | Monthly Cost |
|----------|------|--------------|
| Web Service | Standard | $7 |
| PostgreSQL Database | Standard | $7 |
| **Total** | | **$14/month** |

*Note: Both services needed for full functionality*

### To reduce costs:
- **Free Tier Option**: Use Render's free tier (spins down after 15 min inactivity)
- **Shared Database**: Use external free PostgreSQL (e.g., ElephantSQL free tier)

---

## ğŸ›  Troubleshooting

### Build Fails

**Check build.sh permissions**:
```bash
# Make executable before pushing
chmod +x build.sh
git add build.sh
git commit -m "Make build.sh executable"
git push
```

### Database Connection Issues

**Verify DATABASE_URL**:
- In Render dashboard â†’ PostgreSQL â†’ Connection Info
- Copy **Internal Database URL**
- Add to web service environment variables

### Static Files Not Loading

**Check settings**:
1. Verify `STATIC_ROOT` in settings.py
2. Check `python manage.py collectstatic` runs in build.sh
3. Verify WhiteNoise middleware is enabled

### Application Error 500

**Check logs**:
```bash
# In Render dashboard â†’ Your service â†’ Logs
# Look for Python tracebacks
```

Common issues:
- Missing environment variables
- Database connection failed
- SECRET_KEY not set

---

## ğŸ”’ Security Checklist

Before going live, ensure:

- [ ] `DEBUG=False` in production
- [ ] Strong `SECRET_KEY` set
- [ ] `ALLOWED_HOSTS` set to your domain
- [ ] `CSRF_COOKIE_SECURE=True`
- [ ] `SESSION_COOKIE_SECURE=True`
- [ ] `SECURE_SSL_REDIRECT=True`
- [ ] PostgreSQL database secured
- [ ] Superuser password is strong
- [ ] All environment variables secured

---

## ğŸŒ Custom Domain (Optional)

### Add your own domain:

1. **In Render dashboard** â†’ Your service â†’ Settings
2. **Click "Add Custom Domain"**
3. **Enter your domain**: `yourdomain.com`
4. **Add DNS records** (Render provides instructions):
   ```
   Type: CNAME
   Name: www
   Value: your-app-name.onrender.com
   ```
5. **SSL automatically configured** by Render

### Update ALLOWED_HOSTS:
```
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,your-app-name.onrender.com
```

---

## ğŸ“ˆ Monitoring

### Render Dashboard provides:
- **Metrics**: CPU, Memory, Response time
- **Logs**: Real-time application logs
- **Deployments**: History of all deployments
- **Health Checks**: Automatic service monitoring

### Access logs:
```bash
# In Render Shell
tail -f /var/log/app.log
```

---

## ğŸ”„ Database Backups

Render automatically backs up PostgreSQL:
- Daily automatic backups (retained 7 days)
- Manual backups available in dashboard

### Manual backup:
1. Render dashboard â†’ PostgreSQL â†’ Backups
2. Click "Create Backup"

### Restore from backup:
1. Backups tab â†’ Select backup
2. Click "Restore"

---

## ğŸ“ Support

### Render Support:
- Docs: https://render.com/docs
- Community: https://community.render.com
- Email: support@render.com

### Application Issues:
- Check `DEPLOYMENT.md` for general troubleshooting
- Review Django logs in Render dashboard
- Run `python check_deployment.py` locally first

---

## âš¡ Quick Reference

### Useful Render Commands (in Shell):

```bash
# Check Django settings
python manage.py check

# Run migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Collect static files
python manage.py collectstatic --noinput

# Django shell
python manage.py shell

# Check database
python manage.py dbshell
```

---

## ğŸ‰ Deployment Complete!

Your Tesla Investment Platform is now live on Render!

**Next steps:**
1. Access your site at https://your-app-name.onrender.com
2. Login to admin and configure investment plans
3. Add crypto wallet addresses
4. Test all features
5. Share your site!

---

## ğŸ“± Post-Deployment Testing

Test these features:
- [ ] User registration
- [ ] User login
- [ ] Dashboard loads
- [ ] Investment subscription
- [ ] Deposit submission
- [ ] Withdrawal request
- [ ] Support ticket creation
- [ ] Admin login
- [ ] Admin deposit approval
- [ ] Admin investment completion
- [ ] Mobile responsiveness

---

**Total Monthly Cost: $14**
**Deployment Time: ~10 minutes**
**Auto-SSL: âœ… Included**
**Auto-Backups: âœ… Included**

ğŸš€ **Your app is now live!**
